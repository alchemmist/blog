umami.alchemmist.xyz {
    reverse_proxy umami:3000
}

cats.alchemmist.xyz {
    reverse_proxy cats:5173
}

alchemmist.xyz {
    root * /srv
    encode gzip zstd
    file_server

    header /*.js Cache-Control "public, max-age=31536000, immutable"
    header /*.css Cache-Control "public, max-age=31536000, immutable"
    header /_pagefind/*.js Cache-Control "public, max-age=31536000, immutable"
    header /_pagefind/*.css Cache-Control "public, max-age=31536000, immutable"
    header /favicon.ico Cache-Control "public, max-age=31536000, immutable"

    header /assets/*.js Cache-Control "public, max-age=180000"
    header /assets/*.css Cache-Control "public, max-age=1200"
    header /assets/*.html Cache-Control "public, max-age=600"
    header /assets/fonts/* Cache-Control "public, max-age=31536000, immutable"
    header /assets/*.png Cache-Control "public, max-age=31536000, immutable"
    header /assets/*.jpg Cache-Control "public, max-age=31536000, immutable"
    header /assets/*.jpeg Cache-Control "public, max-age=31536000, immutable"
    header /assets/*.webp Cache-Control "public, max-age=31536000, immutable"
    header /assets/*.svg Cache-Control "public, max-age=31536000, immutable"
    header /favicon.ico Cache-Control "public, max-age=31536000, immutable"
    
    header /sitemap.xml Content-Type application/xml
    header /en/sitemap.xml Content-Type application/xml
    header /ru/sitemap.xml Content-Type application/xml
    header /robots.txt Content-Type text/plain
    header /index.xml Content-Type application/rss+xml

    redir /cv/en/long https://alchemmist.github.io/CV/pdf/long-eng.pdf
    redir /cv/en/go https://alchemmist.github.io/CV/pdf/go-eng.pdf
    redir /cv/en/python https://alchemmist.github.io/CV/pdf/python-eng.pdf
    redir /cv/ru/long https://alchemmist.github.io/CV/pdf/long-rus.pdf
    redir /cv/ru/short https://alchemmist.github.io/CV/pdf/short-rus.pdf
    redir /cv/ru/go https://alchemmist.github.io/CV/pdf/go-rus.pdf
    redir /cv/ru/python https://alchemmist.github.io/CV/pdf/python-rus.pdf

    redir /rss /index.xml
    redir /feed /index.xml
    redir /ru/ / 301
    redir /ru / 301
}


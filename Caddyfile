umami.alchemmist.xyz {
    reverse_proxy umami:3000
}

cats.alchemmist.xyz {
    reverse_proxy cats:5173
}

alchemmist.xyz {
    root * /srv
    encode gzip zstd
    file_server

    header *.js Cache-Control "public, max-age=180000"
    header *.css Cache-Control "public, max-age=1200"
    header *.html Cache-Control "public, max-age=100"
    header *.woff2 Cache-Control "public, max-age=31536000, immutable"
    header *.png Cache-Control "public, max-age=31536000, immutable"
    header *.jpg Cache-Control "public, max-age=31536000, immutable"
    header *.jpeg Cache-Control "public, max-age=31536000, immutable"
    header *.webp Cache-Control "public, max-age=31536000, immutable"
    header *.svg Cache-Control "public, max-age=31536000, immutable"
    header *.ico Cache-Control "public, max-age=31536000, immutable"
    header *.mp4 Cache-Control "public, max-age=31536000, immutable"
    header *.gif Cache-Control "public, max-age=31536000, immutable"
    
    header /sitemap.xml Content-Type application/xml
    header /en/sitemap.xml Content-Type application/xml
    header /ru/sitemap.xml Content-Type application/xml
    header /robots.txt Content-Type text/plain
    header /index.xml Content-Type application/rss+xml

    redir /cv/en/long https://alchemmist.github.io/CV/pdf/long-eng.pdf
    redir /cv/en/go https://alchemmist.github.io/CV/pdf/go-eng.pdf
    redir /cv/en/python https://alchemmist.github.io/CV/pdf/python-eng.pdf
    redir /cv/ru/long https://alchemmist.github.io/CV/pdf/long-rus.pdf
    redir /cv/ru/short https://alchemmist.github.io/CV/pdf/short-rus.pdf
    redir /cv/ru/go https://alchemmist.github.io/CV/pdf/go-rus.pdf
    redir /cv/ru/python https://alchemmist.github.io/CV/pdf/python-rus.pdf

    redir /rss /index.xml
    redir /feed /index.xml
    redir /ru/ / 301
    redir /ru / 301
}

